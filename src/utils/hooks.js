// Custom hooks for better state management and performance
import { useState, useEffect, useMemo, useCallback } from 'react';\nimport { storage, STORAGE_KEYS, debounce } from './theme';\n\n// Theme hook\nexport const useTheme = () => {\n  const [isDarkMode, setIsDarkMode] = useState(() => {\n    const saved = storage.get(STORAGE_KEYS.THEME);\n    return saved ? saved === 'dark' : true;\n  });\n\n  const toggleTheme = useCallback(() => {\n    setIsDarkMode(prev => {\n      const newMode = !prev;\n      storage.set(STORAGE_KEYS.THEME, newMode ? 'dark' : 'light');\n      document.documentElement.classList.toggle('dark', newMode);\n      return newMode;\n    });\n  }, []);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('dark', isDarkMode);\n  }, [isDarkMode]);\n\n  return { isDarkMode, toggleTheme };\n};\n\n// Favorites hook\nexport const useFavorites = () => {\n  const [favorites, setFavorites] = useState(() => \n    storage.get(STORAGE_KEYS.FAVORITES, [])\n  );\n\n  const toggleFavorite = useCallback((tool) => {\n    setFavorites(prevFavorites => {\n      const exists = prevFavorites.find(f => f.url === tool.url);\n      const newFavorites = exists\n        ? prevFavorites.filter(f => f.url !== tool.url)\n        : [...prevFavorites, tool];\n      \n      storage.set(STORAGE_KEYS.FAVORITES, newFavorites);\n      return newFavorites;\n    });\n  }, []);\n\n  const isFavorite = useCallback((tool) => {\n    return favorites.some(f => f.url === tool.url);\n  }, [favorites]);\n\n  return { favorites, toggleFavorite, isFavorite };\n};\n\n// Search history hook\nexport const useSearchHistory = () => {\n  const [searchHistory, setSearchHistory] = useState(() => \n    storage.get(STORAGE_KEYS.SEARCH_HISTORY, [])\n  );\n\n  const addToSearchHistory = useCallback(\n    debounce((query, results) => {\n      if (query.trim() && query.length > 2) {\n        setSearchHistory(prevHistory => {\n          const newHistory = [{\n            query,\n            results,\n            timestamp: Date.now()\n          }, ...prevHistory.filter(h => h.query !== query)].slice(0, 20);\n          \n          storage.set(STORAGE_KEYS.SEARCH_HISTORY, newHistory);\n          return newHistory;\n        });\n      }\n    }, 1000),\n    []\n  );\n\n  const clearSearchHistory = useCallback(() => {\n    setSearchHistory([]);\n    storage.remove(STORAGE_KEYS.SEARCH_HISTORY);\n  }, []);\n\n  return { searchHistory, addToSearchHistory, clearSearchHistory };\n};\n\n// Keyboard shortcuts hook\nexport const useKeyboardShortcuts = (handlers) => {\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // Prevent shortcuts when typing in inputs\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\n        return;\n      }\n\n      const key = e.key.toLowerCase();\n      const combo = `${e.ctrlKey || e.metaKey ? 'ctrl+' : ''}${e.shiftKey ? 'shift+' : ''}${key}`;\n      \n      if (handlers[combo]) {\n        e.preventDefault();\n        handlers[combo](e);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handlers]);\n};\n\n// Debounced search hook\nexport const useDebouncedSearch = (initialValue = '', delay = 300) => {\n  const [searchQuery, setSearchQuery] = useState(initialValue);\n  const [debouncedQuery, setDebouncedQuery] = useState(initialValue);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedQuery(searchQuery);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchQuery, delay]);\n\n  return [searchQuery, debouncedQuery, setSearchQuery];\n};